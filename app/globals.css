@import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* ── Base ───────────────────────────────────── */
@layer base {
  body {
    @apply antialiased text-mpj-charcoal;
    background-color: #FAF8F5;
    font-feature-settings: "cv11", "ss01";
  }

  html {
    scroll-behavior: smooth;
  }

  *:focus-visible {
    @apply outline-2 outline-offset-2 outline-mpj-gold ring-0;
  }

  /* Better default select appearance */
  select {
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
    background-position: right 0.5rem center;
    background-repeat: no-repeat;
    background-size: 1.25em 1.25em;
    padding-right: 2.5rem;
    appearance: none;
    -webkit-appearance: none;
  }
}

/* ── Components ─────────────────────────────── */
@layer components {

  /* ── Skeleton ── */
  .skeleton {
    @apply relative overflow-hidden rounded-lg;
    background-color: #E8E2D9;
  }
  .skeleton::after {
    content: '';
    @apply absolute inset-0;
    background: linear-gradient(
      90deg,
      transparent 0%,
      rgba(255,255,255,0.6) 40%,
      rgba(255,255,255,0.6) 60%,
      transparent 100%
    );
    animation: shimmer 1.8s ease-in-out infinite;
  }

  /* ── Toast ── */
  .toast {
    @apply fixed top-5 right-5 z-[200] flex items-center gap-3 px-4 py-3.5 rounded-2xl shadow-toast text-white text-sm font-medium;
    min-width: 280px;
    max-width: 400px;
    backdrop-filter: blur(8px);
  }
  .toast-error   { background: linear-gradient(135deg, #ef4444, #dc2626); }
  .toast-success { background: linear-gradient(135deg, #22c55e, #16a34a); }
  .toast-info    { background: linear-gradient(135deg, #3b82f6, #2563eb); }

  /* ── Card base ── */
  .card {
    @apply bg-white rounded-card border border-mpj-warm shadow-card transition-all duration-200;
  }
  .card:hover {
    @apply shadow-card-hover -translate-y-px;
  }

  /* KPI card */
  .kpi-card {
    @apply card cursor-default p-5;
  }
  .kpi-card:hover {
    @apply shadow-card-hover border-mpj-gold/30 -translate-y-0.5;
  }

  /* ── Table ── */
  .table-responsive {
    @apply overflow-x-auto -mx-6 px-6;
    -webkit-overflow-scrolling: touch;
    background: linear-gradient(to right, white 30%, rgba(255,255,255,0)) local,
                linear-gradient(to right, rgba(255,255,255,0), white 70%) local,
                radial-gradient(farthest-side at 0 50%, rgba(28,25,23,0.06), transparent) scroll,
                radial-gradient(farthest-side at 100% 50%, rgba(28,25,23,0.06), transparent) scroll;
    background-attachment: local, local, scroll, scroll;
    background-size: 40px 100%, 40px 100%, 14px 100%, 14px 100%;
    background-repeat: no-repeat;
    background-position: left, right, left, right;
  }

  /* Badge / pill */
  .badge {
    @apply inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-semibold;
  }
  .badge-green    { @apply bg-green-100 text-green-800; }
  .badge-red      { @apply bg-red-100 text-red-700; }
  .badge-amber    { @apply bg-amber-100 text-amber-800; }
  .badge-gray     { @apply bg-gray-100 text-gray-600; }
  .badge-charcoal { @apply bg-mpj-charcoal/10 text-mpj-charcoal; }

  /* Insight pill */
  .insight-pill {
    @apply flex items-center gap-2 px-3 py-2 rounded-xl border text-sm;
  }

  /* Header gradient — deep charcoal */
  .header-gradient {
    background: linear-gradient(135deg, #1C1917 0%, #292524 60%, #3C3530 100%);
  }
}

/* ── Utilities ──────────────────────────────── */
@layer utilities {
  .text-balance {
    text-wrap: balance;
  }

  .scrollbar-hide::-webkit-scrollbar { display: none; }
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  /* Glassmorphism helper */
  .glass {
    background: rgba(255,255,255,0.8);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
  }

  /* Subtle inset shadow for input fields */
  .input-shadow {
    box-shadow: inset 0 1px 3px rgba(28,25,23,0.06);
  }
}

/* ── Keyframes ──────────────────────────────── */
@keyframes shimmer {
  0%   { transform: translateX(-100%); }
  100% { transform: translateX(100%); }
}

/* ── Print ──────────────────────────────────── */
@media print {
  .no-print { display: none !important; }
  body { background: white; }
  .shadow, .shadow-sm, .shadow-md, .shadow-lg, .shadow-card, .shadow-card-hover {
    box-shadow: none !important;
  }
}

/* ── Reduced motion ─────────────────────────── */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
